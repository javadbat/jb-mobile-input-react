{"version":3,"file":"JBMobileInput.umd.js","sources":["../../../common/hooks/use-event.ts","../lib/JBMobileInput.tsx"],"sourcesContent":["import { useEffect } from \"react\";\r\n\r\nexport function useEvent(dom:HTMLElement, event:any, handler:any, passive = false) {\r\n  useEffect(() => {\r\n    if (dom) {\r\n      // initiate the event handler\r\n      dom.addEventListener(event, handler, passive); \r\n    }\r\n    // this will clean up the event every time the component is re-rendered\r\n    return function cleanup() {\r\n      if(dom){\r\n        dom.removeEventListener(event, handler, passive);\r\n      }\r\n    };\r\n  });\r\n}","import React, { useRef, useEffect, useImperativeHandle, useState, useCallback } from 'react';\r\n// import PropTypes from 'prop-types';\r\nimport 'jb-mobile-input';\r\nimport { useEvent } from '../../../common/hooks/use-event';\r\n// import { JBInputValidationItem } from 'jb-input/dist/Types';\r\nimport {JBInputEventType} from 'jb-input-react';\r\n// eslint-disable-next-line no-duplicate-imports\r\nimport { JBMobileInputWebComponent } from 'jb-mobile-input';\r\ndeclare global {\r\n    // eslint-disable-next-line @typescript-eslint/no-namespace\r\n    namespace JSX {\r\n      interface IntrinsicElements {\r\n        'jb-mobile-input': JBMobileInputType;\r\n      }\r\n      interface JBMobileInputType extends React.DetailedHTMLProps<React.HTMLAttributes<JBMobileInputWebComponent>, JBMobileInputWebComponent> {\r\n        class?:string,\r\n        label?: string,\r\n        name?:string,\r\n        message?:string,\r\n        placeholder?:string,\r\n        // ref:React.RefObject<JBDateInputWebComponent>,\r\n      }\r\n    }\r\n}\r\n// eslint-disable-next-line react/display-name\r\nexport const JBMobileInput = React.forwardRef((props:JBMobileInputProps, ref) => {\r\n  const element = useRef<JBMobileInputWebComponent>(null);\r\n  const [refChangeCount, refChangeCountSetter] = useState(0);\r\n  useImperativeHandle(\r\n    ref,\r\n    () => (element ? element.current : {}),\r\n    [element],\r\n  );\r\n  //to force rerender for events\r\n  useEffect(() => {\r\n    refChangeCountSetter(refChangeCount + 1);\r\n  }, [element.current]);\r\n  const onChange = useCallback((e:JBInputEventType<Event>)=>{\r\n    if (typeof props.onChange === \"function\") {\r\n      props.onChange(e);\r\n    }\r\n  },[props.onChange]);\r\n  const onKeydown = useCallback((e)=>{\r\n    if (typeof props.onKeydown === \"function\") {\r\n      props.onKeydown(e);\r\n    }\r\n  },[props.onKeydown]);\r\n  const onKeyup = useCallback((e)=>{\r\n    if (typeof props.onKeyup === \"function\") {\r\n      props.onKeyup(e);\r\n    }\r\n  },[props.onKeyup]);\r\n    \r\n  const onEnter = useCallback((e)=>{\r\n    if (props.onEnter) {\r\n      props.onEnter(e);\r\n    }\r\n  },[props.onEnter]);\r\n  const onFocus = useCallback((e:JBInputEventType<FocusEvent>)=>{\r\n    if (props.onFocus && e instanceof FocusEvent) {\r\n      props.onFocus(e);\r\n    }\r\n  },[props.onFocus]);\r\n  const onBlur = useCallback((e:JBInputEventType<FocusEvent>)=>{\r\n    if (props.onBlur && e instanceof FocusEvent) {\r\n      props.onBlur(e);\r\n    }\r\n  },[props.onBlur]);\r\n  const onInput = useCallback((e:JBInputEventType<InputEvent>)=>{\r\n    if (typeof props.onInput == 'function' && e instanceof InputEvent) {\r\n      props.onInput(e);\r\n    }\r\n  },[props.onInput]);\r\n  const onBeforeInput = useCallback((e:JBInputEventType<InputEvent>)=>{\r\n    if (typeof props.onBeforeinput == 'function' && e instanceof InputEvent) {\r\n      props.onBeforeinput(e);\r\n    }\r\n  },[props.onBeforeinput]);\r\n  useEffect(() => {\r\n    let value = props.value;\r\n    if (props.value == null || props.value === undefined) {\r\n      value = '';\r\n    }\r\n    if(element && element.current && element.current){\r\n      element.current.value = value?.toString() || \"\";\r\n    }\r\n  }, [props.value]);\r\n  // useEffect(() => {\r\n  //     if(element && element.current){\r\n  //         element.current.validationList = props.validationList || [];\r\n  //     }\r\n  // }, [props.validationList]);\r\n  useEffect(() => {\r\n    if (typeof props.disabled == \"boolean\") {\r\n      element?.current?.setAttribute('disabled', `${props.disabled}`);\r\n    }\r\n  }, [props.disabled]);\r\n  useEffect(() => {\r\n    if(props.inputmode){\r\n      element.current?.setAttribute('inputmode',props.inputmode);\r\n    }else{\r\n      element.current?.removeAttribute('inputmode');\r\n    }\r\n  },[props.inputmode]);\r\n  useEvent(element.current, 'change', onChange);\r\n  useEvent(element.current, 'keydown', onKeydown);\r\n  useEvent(element.current, 'keyup', onKeyup);\r\n  useEvent(element.current, 'focus', onFocus);\r\n  useEvent(element.current, 'blur', onBlur);\r\n  useEvent(element.current, 'enter', onEnter);\r\n  useEvent(element.current, 'input', onInput);\r\n  useEvent(element.current, 'beforeinput', onBeforeInput);\r\n    \r\n  return(\r\n    <jb-mobile-input placeholder={props.placeholder} ref={element} class={props.className} label={props.label} message={props.message}>\r\n      {props.children}\r\n    </jb-mobile-input>\r\n  );\r\n});\r\nexport type JBMobileInputProps = {\r\n    label?: string ,\r\n    name?:string,\r\n    className?:string,\r\n    message?:string,\r\n    value: string | number | null | undefined,\r\n    // validationList?: JBInputValidationItem[],\r\n    onEnter?: (e:JBInputEventType<CustomEvent>)=>void,\r\n    onInput?: (e:JBInputEventType<InputEvent>)=>void,\r\n    onBeforeinput?:(e:JBInputEventType<InputEvent>)=>void,\r\n    onFocus?: (e:JBInputEventType<FocusEvent>)=>void,\r\n    onBlur?: (e:JBInputEventType<FocusEvent>)=>void,\r\n    onKeyup?: (e:JBInputEventType<KeyboardEvent>)=>void,\r\n    onKeydown?: (e:JBInputEventType<KeyboardEvent>)=>void,\r\n    onChange?: (e:JBInputEventType<Event>)=>void,\r\n    placeholder?: string,\r\n    disabled?: boolean,\r\n    inputmode?: string,\r\n    children?:any,\r\n}\r\nJBMobileInput.displayName = \"JBMobileInput\";\r\n\r\n"],"names":["useEffect","useRef","useState","useImperativeHandle","useCallback"],"mappings":"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"}