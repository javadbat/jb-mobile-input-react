{"version":3,"file":"JBMobileInput.js","sources":["../../custom-hooks/UseEvent.js","../lib/JBMobileInput.tsx"],"sourcesContent":["import { useEffect } from \"react\";\r\n\r\nexport function useEvent(dom, event, handler, passive = false) {\r\n    useEffect(() => {\r\n        if (dom) {\r\n            // initiate the event handler\r\n            dom.addEventListener(event, handler, passive); \r\n        }\r\n        // this will clean up the event every time the component is re-rendered\r\n        return function cleanup() {\r\n            if(dom){\r\n                dom.removeEventListener(event, handler, passive);\r\n            }\r\n        };\r\n    });\r\n}","import React, { useRef, useEffect, useImperativeHandle, useState, useCallback } from 'react';\r\n// import PropTypes from 'prop-types';\r\nimport 'jb-mobile-input';\r\nimport { useEvent } from '../../custom-hooks/UseEvent';\r\n// import { JBInputValidationItem } from 'jb-input/dist/Types';\r\nimport {JBInputEventType} from 'jb-input-react';\r\n// eslint-disable-next-line no-duplicate-imports\r\nimport { JBMobileInputWebComponent } from 'jb-mobile-input';\r\ndeclare global {\r\n    // eslint-disable-next-line @typescript-eslint/no-namespace\r\n    namespace JSX {\r\n      interface IntrinsicElements {\r\n        'jb-mobile-input': JBMobileInputType;\r\n      }\r\n      interface JBMobileInputType extends React.DetailedHTMLProps<React.HTMLAttributes<JBMobileInputWebComponent>, JBMobileInputWebComponent> {\r\n        class?:string,\r\n        label?: string,\r\n        name?:string,\r\n        message?:string,\r\n        placeholder?:string,\r\n        // ref:React.RefObject<JBDateInputWebComponent>,\r\n      }\r\n    }\r\n}\r\n// eslint-disable-next-line react/display-name\r\nexport const JBMobileInput = React.forwardRef((props:JBMobileInputProps, ref) => {\r\n  const element = useRef<JBMobileInputWebComponent>(null);\r\n  const [refChangeCount, refChangeCountSetter] = useState(0);\r\n  useImperativeHandle(\r\n    ref,\r\n    () => (element ? element.current : {}),\r\n    [element],\r\n  );\r\n  //to force rerender for events\r\n  useEffect(() => {\r\n    refChangeCountSetter(refChangeCount + 1);\r\n  }, [element.current]);\r\n  const onChange = useCallback((e:JBInputEventType<Event>)=>{\r\n    if (typeof props.onChange === \"function\") {\r\n      props.onChange(e);\r\n    }\r\n  },[props.onChange]);\r\n  const onKeydown = useCallback((e)=>{\r\n    if (typeof props.onKeydown === \"function\") {\r\n      props.onKeydown(e);\r\n    }\r\n  },[props.onKeydown]);\r\n  const onKeyup = useCallback((e)=>{\r\n    if (typeof props.onKeyup === \"function\") {\r\n      props.onKeyup(e);\r\n    }\r\n  },[props.onKeyup]);\r\n    \r\n  const onEnter = useCallback((e)=>{\r\n    if (props.onEnter) {\r\n      props.onEnter(e);\r\n    }\r\n  },[props.onEnter]);\r\n  const onFocus = useCallback((e:JBInputEventType<FocusEvent>)=>{\r\n    if (props.onFocus && e instanceof FocusEvent) {\r\n      props.onFocus(e);\r\n    }\r\n  },[props.onFocus]);\r\n  const onBlur = useCallback((e:JBInputEventType<FocusEvent>)=>{\r\n    if (props.onBlur && e instanceof FocusEvent) {\r\n      props.onBlur(e);\r\n    }\r\n  },[props.onBlur]);\r\n  const onInput = useCallback((e:JBInputEventType<InputEvent>)=>{\r\n    if (typeof props.onInput == 'function' && e instanceof InputEvent) {\r\n      props.onInput(e);\r\n    }\r\n  },[props.onInput]);\r\n  const onBeforeInput = useCallback((e:JBInputEventType<InputEvent>)=>{\r\n    if (typeof props.onBeforeinput == 'function' && e instanceof InputEvent) {\r\n      props.onBeforeinput(e);\r\n    }\r\n  },[props.onBeforeinput]);\r\n  useEffect(() => {\r\n    let value = props.value;\r\n    if (props.value == null || props.value === undefined) {\r\n      value = '';\r\n    }\r\n    if(element && element.current && element.current){\r\n      element.current.value = value?.toString() || \"\";\r\n    }\r\n  }, [props.value]);\r\n  // useEffect(() => {\r\n  //     if(element && element.current){\r\n  //         element.current.validationList = props.validationList || [];\r\n  //     }\r\n  // }, [props.validationList]);\r\n  useEffect(() => {\r\n    if (typeof props.disabled == \"boolean\") {\r\n      element?.current?.setAttribute('disabled', `${props.disabled}`);\r\n    }\r\n  }, [props.disabled]);\r\n  useEffect(() => {\r\n    if(props.inputmode){\r\n      element.current?.setAttribute('inputmode',props.inputmode);\r\n    }else{\r\n      element.current?.removeAttribute('inputmode');\r\n    }\r\n  },[props.inputmode]);\r\n  useEvent(element.current, 'change', onChange);\r\n  useEvent(element.current, 'keydown', onKeydown);\r\n  useEvent(element.current, 'keyup', onKeyup);\r\n  useEvent(element.current, 'focus', onFocus);\r\n  useEvent(element.current, 'blur', onBlur);\r\n  useEvent(element.current, 'enter', onEnter);\r\n  useEvent(element.current, 'input', onInput);\r\n  useEvent(element.current, 'beforeinput', onBeforeInput);\r\n    \r\n  return(\r\n    <jb-mobile-input placeholder={props.placeholder} ref={element} class={props.className} label={props.label} message={props.message}>\r\n      {props.children}\r\n    </jb-mobile-input>\r\n  );\r\n});\r\nexport type JBMobileInputProps = {\r\n    label?: string ,\r\n    name?:string,\r\n    className?:string,\r\n    message?:string,\r\n    value: string | number | null | undefined,\r\n    // validationList?: JBInputValidationItem[],\r\n    onEnter?: (e:JBInputEventType<CustomEvent>)=>void,\r\n    onInput?: (e:JBInputEventType<InputEvent>)=>void,\r\n    onBeforeinput?:(e:JBInputEventType<InputEvent>)=>void,\r\n    onFocus?: (e:JBInputEventType<FocusEvent>)=>void,\r\n    onBlur?: (e:JBInputEventType<FocusEvent>)=>void,\r\n    onKeyup?: (e:JBInputEventType<KeyboardEvent>)=>void,\r\n    onKeydown?: (e:JBInputEventType<KeyboardEvent>)=>void,\r\n    onChange?: (e:JBInputEventType<Event>)=>void,\r\n    placeholder?: string,\r\n    disabled?: boolean,\r\n    inputmode?: string,\r\n    children?:any,\r\n}\r\nJBMobileInput.displayName = \"JBMobileInput\";\r\n\r\n"],"names":["useEvent","dom","event","handler","passive","arguments","length","undefined","useEffect","addEventListener","cleanup","removeEventListener"],"mappings":"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"}